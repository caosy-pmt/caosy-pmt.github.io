<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title># MyBatiså­¦ä¹ éšç¬” | Gridea</title>
<link rel="shortcut icon" href="https://caosy-pmt.github.io/favicon.ico?v=1626272039773">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://caosy-pmt.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="# MyBatiså­¦ä¹ éšç¬” | Gridea - Atom Feed" href="https://caosy-pmt.github.io/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="ideaå¸¸ç”¨å¿«æ·é”®
1ã€Ctrl+D å¤åˆ¶å½“å‰è¡Œåˆ°ä¸‹ä¸€è¡Œ 
2ã€Ctrl+N æŸ¥çœ‹å½“å‰ç±»çš„ä¿¡æ¯; Ctrl+Hå®ç°å½“å‰ç±»çš„; Ctrl+B å¿«é€Ÿæ‰“å¼€å…‰æ ‡å¤„çš„ç±»æˆ–æ–¹æ³•
3ã€Alt+0(insert) å®ä½“ç±»å¿«é€Ÿç”Ÿæˆç›¸åº”å‡½æ•° 
4ã€Ctrl+R..." />
    <meta name="keywords" content="" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://caosy-pmt.github.io">
  <img class="avatar" src="https://caosy-pmt.github.io/images/avatar.png?v=1626272039773" alt="">
  </a>
  <h1 class="site-title">
    Gridea
  </h1>
  <p class="site-description">
    æ¸©æ•…è€ŒçŸ¥æ–°ï¼Œä»…ç”¨äºé˜²é—å¿˜
  </p>
  <div class="menu-container">
    
      
        <a href="https://caosy-pmt.github.io" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          å…³äº
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              # MyBatiså­¦ä¹ éšç¬”
            </h2>
            <div class="post-info">
              <span>
                2021-07-03
              </span>
              <span>
                15 min read
              </span>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <h3 id="ideaå¸¸ç”¨å¿«æ·é”®"><em><strong>ideaå¸¸ç”¨å¿«æ·é”®</strong></em></h3>
<pre><code>1ã€Ctrl+D å¤åˆ¶å½“å‰è¡Œåˆ°ä¸‹ä¸€è¡Œ 
2ã€Ctrl+N æŸ¥çœ‹å½“å‰ç±»çš„ä¿¡æ¯; Ctrl+Hå®ç°å½“å‰ç±»çš„; Ctrl+B å¿«é€Ÿæ‰“å¼€å…‰æ ‡å¤„çš„ç±»æˆ–æ–¹æ³•
3ã€Alt+0(insert) å®ä½“ç±»å¿«é€Ÿç”Ÿæˆç›¸åº”å‡½æ•° 
4ã€Ctrl+R å…¨å±€æ›¿æ¢ 
5ã€Ctrl+F æŸ¥æ‰¾æ–‡æœ¬
6ã€Ctrl+P æ–¹æ³•å‚æ•°æç¤º
7ã€Ctrl+X åˆ é™¤è¡Œ
8ã€Ctrl+/ æˆ– Ctrl+Shift+/  æ³¨é‡Šï¼ˆ// æˆ–è€…/*...*/ ï¼‰
9ã€Ctrl+J è‡ªåŠ¨ä»£ç ï¼ˆå¸¸è§çš„ä»£ç ç‰‡æ®µï¼‰
10ã€Shift+F6 é‡å‘½å
11ã€sout å¿«é€Ÿæ‰“å‡ºSystem.out.Println()ï¼›
    main/psvm å¿«é€Ÿæ‰“å‡ºpublic static void mainï¼ˆString args[])
12ã€Ctrl+Alt+O å¿«é€Ÿæ¸…é™¤å¤šä½™åŒ…ã€è‡ªåŠ¨å¯¼åŒ…
13ã€Ctrl+P æŸ¥çœ‹æ–¹æ³•å‚æ•°
14ã€Alt+å›è½¦ å®ç°æ¥å£ã€å¼ºåˆ¶è½¬æ¢
</code></pre>
<hr>
<h3 id="jdbcçš„å†—ä½™æ€§"><em><strong>JDBCçš„å†—ä½™æ€§</strong></em></h3>
<pre><code>public void findStudent() {
    Connection conn = null;
    Statement stmt = null;
    ResultSet rs = null;
    try {
        //æ³¨å†Œ mysql é©±åŠ¨
        Class.forName(&quot;com.mysql.jdbc.Driver&quot;);
        //è¿æ¥æ•°æ®çš„åŸºæœ¬ä¿¡æ¯ url ï¼Œusernameï¼Œpassword
        String url = &quot;jdbc:mysql://localhost:3306/springdb&quot;;
        String username = &quot;root&quot;;
        String password = &quot;123456&quot;;
        //åˆ›å»ºè¿æ¥å¯¹è±¡
         conn = DriverManager.getConnection(url, username, password);
        //ä¿å­˜æŸ¥è¯¢ç»“æœ
        List&lt;Student&gt; stuList = new ArrayList&lt;&gt;();
        //åˆ›å»º Statement, ç”¨æ¥æ‰§è¡Œ sql è¯­å¥
        stmt = conn.createStatement();
        //æ‰§è¡ŒæŸ¥è¯¢ï¼Œåˆ›å»ºè®°å½•é›†ï¼Œ
        rs = stmt.executeQuery(&quot;select * from student&quot;);
        while (rs.next()) {
            Student stu = new Student();
            stu.setId(rs.getInt(&quot;id&quot;));
            stu.setName(rs.getString(&quot;name&quot;));
            stu.setAge(rs.getInt(&quot;age&quot;));
            //ä»æ•°æ®åº“å–å‡ºæ•°æ®è½¬ä¸º Student å¯¹è±¡ï¼Œå°è£…åˆ° List é›†åˆ
            stuList.add(stu);
        }
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        try {
            //å…³é—­èµ„æº
                if (rs != null)  {
                     rs.close();
                 }
                if (stmt != null) {
                    stmt.close();
                }
                if (conn != null) {
                    conn.close();
                }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
</code></pre>
<hr>
<h3 id="å‡†å¤‡å·¥ä½œ"><em><strong>å‡†å¤‡å·¥ä½œ</strong></em></h3>
<p><strong>1ã€è®¾ç½®æºæ ¹resources</strong><br>
æ–°å»ºé¡¹ç›®æ—¶ï¼Œè¦è®¾ç½®æºæ ¹resources,åç»­ç”¨äºå­˜æ”¾mybatisä¸»é…ç½®æ–‡ä»¶ï¼Œä¸”åªæœ‰ä¸ºæºæ ¹æ—¶ï¼Œcompileåtargetæ–‡ä»¶ä¸­æ‰ä¼šæœ‰resourcesã€‚</p>
<p><strong>2ã€mavenä¾èµ–</strong></p>
<pre><code>        &lt;!-- MyBatisä¾èµ–   --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
      &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
      &lt;version&gt;3.5.1&lt;/version&gt;
    &lt;/dependency&gt;ï¼Œ
        &lt;!-- Mysqlé©±åŠ¨   --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;mysql&lt;/groupId&gt;
      &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
      &lt;version&gt;5.1.9&lt;/version&gt;
    &lt;/dependency&gt;
</code></pre>
<p><strong>3ã€mavenæ’ä»¶</strong><br>
æ‰«æjavaç›®å½•ä¸‹çš„å…¨éƒ¨propertiesã€xmlæ–‡ä»¶--&gt;target</p>
<pre><code>&lt;resource&gt;
 &lt;directory&gt;src/main/java&lt;/directory&gt;&lt;!--æ‰€åœ¨çš„ç›®å½•--&gt;
 &lt;includes&gt;&lt;!--åŒ…æ‹¬ç›®å½•ä¸‹çš„.properties,.xml æ–‡ä»¶éƒ½ä¼šæ‰«æåˆ°--&gt;
 &lt;include&gt;**/*.properties&lt;/include&gt;
 &lt;include&gt;**/*.xml&lt;/include&gt;
 &lt;/includes&gt;
 &lt;filtering&gt;false&lt;/filtering&gt;
&lt;/resource&gt;
</code></pre>
<hr>
<h3 id="é…ç½®æ–‡ä»¶xml"><em><strong>é…ç½®æ–‡ä»¶.xml</strong></em></h3>
<p>ğŸ˜€åˆ›å»ºæ•°æ®åº“--&gt;å®ä½“ç±»--&gt;Daoæ¥å£ã€æ¥å£é‡Œæ–¹æ³•å£°æ˜--&gt;é…ç½®æ–‡ä»¶ï¼›<br>
ğŸ˜€ideaçš„è‡ªå®šä¹‰ä»£ç æ¨¡æ¿ï¼šè®¾ç½®--&gt;ç¼–è¾‘å™¨--&gt;ä»£ç æ ·å¼--&gt;æ–‡ä»¶å’Œä»£ç æ¨¡æ¿--&gt;&quot;+&quot;ã€‚</p>
<p><strong>1ã€Dao æ¥å£ Mapper æ˜ å°„æ–‡ä»¶</strong></p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;åŒådaoæ¥å£çš„å…¨é™å®šåç§°&quot;&gt;
    &lt;select id=&quot;daoæ¥å£ä¸­çš„æ–¹æ³•å&quot; resultType=&quot;&quot;&gt;
        
    &lt;/select&gt;
&lt;/mapper&gt;
</code></pre>
<p><strong>2ã€mybatisä¸»é…ç½®æ–‡ä»¶</strong><br>
ğŸ˜€propertiesæ–‡ä»¶çµæ´»é…ç½®è¿æ¥éœ€è¦çš„æ•°æ®ï¼ˆæ•°æ®åº“åŸºæœ¬ä¿¡æ¯ï¼‰ï¼›<br>
ğŸ˜€è®¾ç½®mybatisè¾“å‡ºæ—¥å¿—ï¼Œä¾¿äºè°ƒè¯•ï¼›<br>
ğŸ˜€sql mapper(sqlæ˜ å°„æ–‡ä»¶)çš„ä½ç½®çš„ä¿©ç§è¡¨ç¤ºï¼šresourceã€package</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE configuration
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
&lt;configuration&gt;

    &lt;!--æŒ‡å®špropertiesæ–‡ä»¶çš„ä½ç½®ï¼Œä»ç±»è·¯å¾„æ ¹å¼€å§‹æ‰¾æ–‡ä»¶ï¼Œçµæ´»é…ç½®ä¸‹é¢è¿æ¥éœ€è¦çš„æ•°æ®--&gt;
    &lt;properties resource=&quot;jdbc.properties&quot; /&gt;

    &lt;!--settingsï¼šæ§åˆ¶mybatiså…¨å±€è¡Œä¸º--&gt;
    &lt;settings&gt;
        &lt;!--mybatisè¾“å‡ºæ—¥å¿—--&gt;
        &lt;setting name=&quot;logImpl&quot; value=&quot;STDOUT_LOGGING&quot;/&gt;
    &lt;/settings&gt;

    &lt;environments default=&quot;mydev&quot;&gt;
        &lt;environment id=&quot;mydev&quot;&gt;
            &lt;transactionManager type=&quot;JDBC&quot;/&gt;
            &lt;dataSource type=&quot;POOLED&quot;&gt;
                &lt;!--ä»jdbc.propertiesä¸­å¾—åˆ°æ•°æ®åº“çš„é©±åŠ¨ç±»å--&gt;
                &lt;property name=&quot;driver&quot; value=&quot;${jdbc.driver}&quot;/&gt;
                &lt;!--è¿æ¥æ•°æ®åº“çš„urlå­—ç¬¦ä¸²--&gt;
                &lt;property name=&quot;url&quot; value=&quot;${jdbc.url}&quot;/&gt;
                &lt;!--è®¿é—®æ•°æ®åº“çš„ç”¨æˆ·å--&gt;
                &lt;property name=&quot;username&quot; value=&quot;${jdbc.user}&quot;/&gt;
                &lt;!--å¯†ç --&gt;
                &lt;property name=&quot;password&quot; value=&quot;${jdbc.passwd}&quot;/&gt;
            &lt;/dataSource&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;

    &lt;!-- sql mapper(sqlæ˜ å°„æ–‡ä»¶)çš„ä½ç½®--&gt;
    &lt;mappers&gt;
        &lt;!--ç¬¬ä¸€ç§æ–¹å¼ï¼šæŒ‡å®šå¤šä¸ªmapperæ–‡ä»¶--&gt;
        &lt;!--&lt;mapper resource=&quot;com/bjpowernode/dao/StudentDao.xml&quot;/&gt;
        &lt;mapper resource=&quot;com/bjpowernode/dao/OrderDao.xml&quot; /&gt;--&gt;

        &lt;!--ç¬¬äºŒç§æ–¹å¼ï¼š ä½¿ç”¨åŒ…å
            name: xmlæ–‡ä»¶ï¼ˆmapperæ–‡ä»¶ï¼‰æ‰€åœ¨çš„åŒ…å, è¿™ä¸ªåŒ…ä¸­æ‰€æœ‰xmlæ–‡ä»¶ä¸€æ¬¡éƒ½èƒ½åŠ è½½ç»™mybatis
            ä½¿ç”¨packageçš„è¦æ±‚ï¼š
             1. mapperæ–‡ä»¶åç§°éœ€è¦å’Œæ¥å£åç§°ä¸€æ ·ï¼Œ åŒºåˆ†å¤§å°å†™çš„ä¸€æ ·
             2. mapperæ–‡ä»¶å’Œdaoæ¥å£éœ€è¦åœ¨åŒä¸€ç›®å½•
        --&gt;
        &lt;package name=&quot;com.csy.dao&quot;/&gt;
    &lt;/mappers&gt;
&lt;/configuration&gt;

</code></pre>
<hr>
<h3 id="å¸¸ç”¨ä»£ç å¯å†™ä¸€ä¸ªå·¥å…·ç±»util"><em><strong>å¸¸ç”¨ä»£ç å¯å†™ä¸€ä¸ªå·¥å…·ç±»util</strong></em></h3>
<p>ğŸ˜€è·å–SqlSessionå¯¹è±¡</p>
<pre><code>public class SqlSessionUtil {
    //å®šä¹‰ SqlSessionFactory
    private static SqlSessionFactory factory = null;
    static {
        //ä½¿ç”¨ é™æ€å— åˆ›å»ºä¸€æ¬¡ SqlSessionFactory
        try{
            ğŸ˜€String config = &quot;mybatis.xml&quot;;
            //è¯»å–é…ç½®æ–‡ä»¶
            InputStream in = Resources.getResourceAsStream(config);
            //åˆ›å»º SqlSessionFactory å¯¹è±¡
            factory = new SqlSessionFactoryBuilder().build(in);
        }catch (Exception e){
            factory = null;
            e.printStackTrace();
        }
    }
    /* è·å– SqlSession å¯¹è±¡ */
    public static SqlSession getSqlSession(){
        SqlSession session = null;
        if( factory != null){
            session = factory.openSession();
        }
        return session;
    }
}
</code></pre>
<hr>
<h3 id="åŠ¨æ€ä»£ç†"><em><strong>åŠ¨æ€ä»£ç†</strong></em></h3>
<p><strong>1ã€ä¼ ç»Ÿçš„Daoå¼€å‘</strong><br>
éœ€è¦åˆ›å»ºå®ç°ç±»ï¼Œå†å®ç°Daoæ¥å£çš„æ–¹æ³•ï¼Œè·å–SqlSessionåä¼šç›´æ¥è°ƒç”¨SqlSessionä¸­çš„å¢åˆ æ”¹æŸ¥æ–¹æ³•ï¼Œå‚æ•°è‡³å°‘ï¼ˆé™¤æŸ¥å¤–éƒ½æœ‰å…¶ä»–å‚æ•°ï¼‰ä¸ºDaoæ¥å£ä¸­å…·ä½“æ–¹æ³•çš„å…¨é™å®šåç§°ï¼Œä»£ç å†—ä½™æ€§æå¤§ï¼Œä¼šæœ‰å¾ˆå¤šç›¸ä¼¼çš„ä»£ç ã€‚<br>
<strong>2ã€åŠ¨æ€ä»£ç†</strong><br>
ä¼šè°ƒç”¨å…¶getMapper(æ¥å£å.class)æ–¹æ³•ï¼ŒåŠ¨æ€ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å¯è°ƒç”¨Daoæ¥å£ç±»ä¸­ä¸mapperæ–‡ä»¶ä¸­â€idâ€œåŒåçš„æ–¹æ³•ï¼Œå»æ‰§è¡Œä»mapperæ–‡ä»¶ä¸­çš„sqlè¯­å¥ï¼Œå¹¶å¾—åˆ°ç›¸åº”çš„ç»“æœå¯¹è±¡ï¼ˆjdbcä¸­çš„ä¸€ç³»åˆ—æ“ä½œï¼‰ã€‚ä»¥ä¸‹åŠ¨æ€ä»£ç†æ–¹æ³•ï¼š</p>
<pre><code>public void selectAllStudentsTest(){
        SqlSession sqlSession = SqlSessionUtil.getSqlSession();
        StudentDao dao = sqlSession.getMapper(StudentDao.class);
        List&lt;Student&gt; stus =dao.selectAllStudents();
        for(Student stu:stus){
            System.out.println(&quot;å­¦ç”Ÿ&quot;+stu);
        }
        sqlSession.close();
    }
</code></pre>
<hr>
<h3 id="mybatisä¼ é€’å‚æ•°"><em><strong>mybatisä¼ é€’å‚æ•°</strong></em></h3>
<p>ä» java ä»£ç ä¸­æŠŠå‚æ•°ä¼ é€’åˆ° mapper.xml æ–‡ä»¶ã€‚</p>
<p><strong>1ã€ä¸€ä¸ªç®€å•å‚æ•°</strong><br>
ä½¿ç”¨#{id}å ä½ç¬¦ï¼Œå…¶ä¸­idå¯ä¸ºä»»æ„å€¼ï¼š<br>
<code>select * from student where id=#{StudentId}</code></p>
<p><strong>2ã€å¤šä¸ªå‚æ•°</strong><br>
ï¼ˆ1ï¼‰ä½¿ç”¨@Param<br>
mappeæ–‡ä»¶é€šè¿‡ä½¿ç”¨ä¸Daoæ¥å£æ–¹æ³•ä¸­çš„ç›¸åŒåç§°çš„å½¢å‚æ¥ä½¿ç”¨å‚æ•°ï¼Œå³åœ¨æ–¹æ³•å½¢å‚å‰é¢åŠ å…¥@Param(â€œè‡ªå®šä¹‰å‚æ•°åâ€)ï¼Œmapper æ–‡ä»¶ä½¿ç”¨#{è‡ªå®šä¹‰å‚æ•°å}ã€‚<br>
ğŸ˜€æ¥å£æ–¹æ³•ï¼š</p>
<pre><code>public List&lt;Student&gt; selectStudentsByIdAndAge(@Param(&quot;studentId&quot;) int id,
                                            @Param(&quot;studentAge&quot;) int age);
</code></pre>
<p>ğŸ˜€mapperæ–‡ä»¶ï¼š</p>
<pre><code>    &lt;select id=&quot;selectStudentsByIdAndAge&quot; resultType=&quot;com.csy.entity.Student&quot;&gt;
        select * from student where id&gt;#{studentId} and age&gt;#{studentAge}
    &lt;/select&gt;
</code></pre>
<p>(2) ä½¿ç”¨å¯¹è±¡<br>
Daoæ¥å£æ–¹æ³•çš„å½¢å‚ä¸ºå¯¹è±¡ï¼Œæ­¤æ—¶mapperæ–‡ä»¶ä¸­çš„#{}ä¸­ç›´æ¥å†™è¯¥å¯¹è±¡çš„ç›¸åº”å±æ€§<br>
ğŸ˜€æ¥å£æ–¹æ³•ï¼š</p>
<pre><code>public int insertOneStudent(Student stu);
</code></pre>
<p>ğŸ˜€mapperæ–‡ä»¶ï¼š</p>
<pre><code>&lt;insert id=&quot;insertOneStudent&quot; &gt;
        insert into student(id,name,email,age) values(#{id},#{name},#{email},#{age})
&lt;/insert&gt;
</code></pre>
<p><strong>3ã€<code>#</code>ä¸<code>$</code>çš„åŒºåˆ«</strong><br>
ï¼ˆ1ï¼‰<code>#</code>æ˜¯å ä½ç¬¦ï¼Œä½¿ç”¨ï¼Ÿåšå ä½ï¼Œmybatiså†…éƒ¨è°ƒç”¨PreparedStatementå¯¹è±¡æ‰§è¡Œsqlè¯­å¥ï¼Œæ•ˆç‡é«˜ï¼›<br>
ï¼ˆ2ï¼‰<code>#</code>è¡¨ç¤ºåˆ—çš„å€¼ï¼Œä¸€èˆ¬æ”¾åœ¨ç­‰å·çš„å³ä¾§ä½¿ç”¨ï¼›<br>
ï¼ˆ3ï¼‰<code>$</code>æ˜¯å­—ç¬¦ä¸²ä»£ç†è¿æ¥ï¼ŒæŠŠsqlè¯­å¥å’Œ<code>$</code>{}ä½ç½®çš„å€¼è¿æ¥åœ¨ä¸€èµ·ç»„æˆæ–°çš„è¯­å¥ï¼›<br>
ï¼ˆ4ï¼‰<code>$</code>æ‰€è¡¨ç¤ºçš„å†…å®¹æ˜¯åŸæ ·æ›¿æ¢çš„<br>
ï¼ˆ5ï¼‰<code>$</code>ä½¿ç”¨çš„sqlè¯­å¥ï¼Œmybatisä½¿ç”¨çš„æ˜¯Statementå¯¹è±¡æ‰§è¡Œsqlï¼›<br>
ï¼ˆ6ï¼‰<code>$</code>ä¸€èˆ¬æ˜¯å¸¸ç”¨ä½œæ›¿æ¢è¡¨åã€åˆ—åç­‰ï¼Œä¸åšå€¼çš„ä½¿ç”¨ã€‚<br>
ğŸ˜€<code>$</code>çš„å¸¸è§„ç”¨æ³•ï¼š<br>
æ¥å£æ–¹æ³•ï¼š</p>
<pre><code>Student findByDiffField(@Param(&quot;col&quot;) String colunName,@Param(&quot;cval&quot;) Object 
value);
</code></pre>
<p>mapper æ–‡ä»¶ï¼š</p>
<pre><code>&lt;select id=&quot;findByDiffField&quot; resultType=&quot;com.bjpowernode.domain.Student&quot;&gt;
 select * from student where ${col} = #{cval}
&lt;/select&gt;
</code></pre>
<hr>
<h3 id="mybatisè¾“å‡ºç»“æœ"><em><strong>mybatisè¾“å‡ºç»“æœ</strong></em></h3>
<p><strong>ï¼ˆä¸€ï¼‰resultType</strong></p>
<p><strong>1ã€ç®€å•ç±»å‹ï¼ˆintã€String...)</strong></p>
<p><strong>2ã€å¯¹è±¡ç±»å‹</strong></p>
<p><strong>3ã€map</strong><br>
sql çš„æŸ¥è¯¢ç»“æœä½œä¸º Map çš„ key å’Œ valueã€‚æ¨èä½¿ç”¨ Map&lt;Object,Object&gt;ã€‚<br>
æ³¨æ„ï¼šMap ä½œä¸ºæ¥å£è¿”å›å€¼ï¼Œsql è¯­å¥çš„æŸ¥è¯¢ç»“æœæœ€å¤šåªèƒ½æœ‰ä¸€æ¡è®°å½•ã€‚å¤§äºä¸€æ¡è®°å½•æ˜¯é”™è¯¯ã€‚</p>
<p>æ¥å£æ–¹æ³•ï¼š<br>
<code>Map&lt;Object,Object&gt; selectReturnMap(int id);</code></p>
<p>mapper æ–‡ä»¶ï¼š</p>
<pre><code>&lt;select id=&quot;selectReturnMap&quot; resultType=&quot;java.util.HashMap&quot;&gt;
 select * from student where id = #{studentId}
&lt;/select&gt;
</code></pre>
<p>æµ‹è¯•ç»“æœï¼š<br>
<code>mapå¯¹è±¡ï¼š{name=å¼ é£, id=1003, email=zf@163.com, age=19}</code></p>
<p><strong>ï¼ˆäºŒï¼‰resultMap</strong></p>
<p>å¸¸ç”¨äºæ•°æ®åº“åˆ—åä¸javaç±»ä¸­çš„å±æ€§åä¸ä¸€è‡´æ—¶ï¼ˆä¸å¸¸ç”¨ï¼‰ï¼Œé€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬éƒ½ä¼šå°†å…¶è®¾ä¸ºä¸€è‡´ã€‚</p>
<p>æ­¤å¤„ç¤ºèŒƒä¸€ä¸‹ï¼š</p>
<p>æ¥å£æ–¹æ³•ï¼š<br>
`List<Student> selectUseResultMap(QueryParam param);</p>
<p>mapper æ–‡ä»¶ï¼š</p>
<pre><code>&lt;!-- åˆ›å»º resultMap
    id:è‡ªå®šä¹‰çš„å”¯ä¸€åç§°ï¼Œåœ¨&lt;select&gt;ä½¿ç”¨
    type:æœŸæœ›è½¬ä¸ºçš„ java å¯¹è±¡çš„å…¨é™å®šåç§°æˆ–åˆ«å --&gt;

&lt;resultMap id=&quot;studentMap&quot; type=&quot;com.bjpowernode.domain.Student&quot;&gt;
    &lt;!-- ä¸»é”®å­—æ®µä½¿ç”¨ id --&gt;
    &lt;id column=&quot;id&quot; property=&quot;stuid&quot; /&gt;
    &lt;!--éä¸»é”®å­—æ®µä½¿ç”¨ result--&gt;
    &lt;result column=&quot;name&quot; property=&quot;stuname&quot;/&gt;
    &lt;result column=&quot;email&quot; property=&quot;stuemail&quot; /&gt;
    &lt;result column=&quot;age&quot; property=&quot;stuage&quot; /&gt;
&lt;/resultMap&gt;

&lt;!--resultMap: resultMap æ ‡ç­¾ä¸­çš„ id å±æ€§å€¼--&gt;
&lt;select id=&quot;selectUseResultMap&quot; resultMap=&quot;studentMap&quot;&gt;
    select id,name,email,age from student where name=#{queryName} or age=#
{queryAge}
&lt;/select&gt;
</code></pre>
<p>å…¶ä¸­columnä¸ºæ•°æ®åº“åˆ—åï¼Œpropertyä¸ºè¾“å‡ºçš„javaç±»å¯¹è±¡çš„å±æ€§åã€‚</p>
<p>å¦‚æœè¦ä½¿ç”¨resultTypeå¤„ç†æ­¤ç§æƒ…å†µï¼Œå¯ä½¿ç”¨åˆ—åˆ«åï¼Œåœ¨sqlè¯­å¥ä¸­åŠ å…¥ä¸€äº›ä¸œè¥¿ï¼š<br>
<code>select id as stuid, name as stuname,age as stuage,email as stueamil from student</code></p>
<hr>
<h3 id="æ¨¡ç³ŠæŸ¥è¯¢-like"><em><strong>æ¨¡ç³ŠæŸ¥è¯¢ like</strong></em></h3>
<p><strong>1ã€åœ¨javaä»£ç ä¸­çš„å‚æ•°å…¥æ‰‹</strong></p>
<p>sqlè¯­å¥ï¼š<br>
<code>select * from student where name like #{å‚æ•°}</code><br>
è¿™é‡Œçš„å‚æ•°ä¾‹å¦‚ä¸º`â€œæ%â€ã€‚</p>
<p><strong>2ã€åœ¨mapperæ–‡ä»¶çš„sqlè¯­å¥é‡Œç›´æ¥åŠ </strong></p>
<p>sqlè¯­å¥ï¼š<br>
<code>select * from student where name like #{å‚æ•°} &quot;%&quot;</code><br>
è¿™é‡Œçš„å‚æ•°ä¸º<code>â€œæâ€</code>,è¦æ³¨æ„ä½¿ç”¨ç©ºæ ¼éš”å¼€å‚æ•°ä¸%ã€‚</p>
<hr>
<h3 id="åŠ¨æ€sql"><em><strong>åŠ¨æ€Sql</strong></em></h3>
<p>ä¸»è¦æ˜¯é€šè¿‡å¸¸ç”¨çš„åŠ¨æ€ SQL æ ‡ç­¾æœ‰<code>&lt;if&gt;ã€&lt;where&gt;ã€&lt;foreach&gt;</code>æ¥åŠ¨æ€æ‹¼æ¥sqlè¯­å¥ã€‚</p>
<p><strong>1ã€<code>&lt;if&gt; ä¸ &lt;where&gt;</code></strong><br>
<code>&lt;if&gt;</code>å•ç‹¬ä½¿ç”¨æ—¶æœ€å‰é¢éœ€è¦åŠ ä¸€ä¸ªæ’ç­‰å¼ï¼Œä¿è¯åé¢çš„è¿æ¥è¯ï¼ˆandã€or...)ä¸ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥å¸¸å¸¸ä¼šä¸<code>&lt;where&gt;</code>æ ‡ç­¾è¿ç”¨ã€‚</p>
<p>æ¥å£æ–¹æ³•ï¼š<br>
<code>List&lt;Student&gt; selectStudentsSqlIf2(@Param(&quot;stuName&quot;) String name,@Param(&quot;stuAge&quot;) int age);</code></p>
<p>å•ç‹¬çš„if-sqlè¯­å¥ï¼š</p>
<pre><code>select id,name,email,age from student
        where 1=1
        &lt;if test=&quot;stuName != null and stuName !='' &quot;&gt;
            and name = #{stuName}
        &lt;/if&gt;
        &lt;if test=&quot;stuAge &gt; 0 &quot;&gt;
            and age &amp;gt; #{stuAge}
        &lt;/if&gt;
</code></pre>
<p>ä¸Šè¿°ä¸ºç®€å•ç±»å‹å‚æ•°ï¼Œè‹¥ä¸ºå¯¹è±¡ç±»å‹å‚æ•°ï¼Œtestä¸­å¯ç›´æ¥ä½¿ç”¨javaç±»çš„å±æ€§åï¼Œç”±mybatiså»getã€‚</p>
<p>if-where Sqlè¯­å¥ï¼šå°†<code>where æ’ç­‰å¼ï¼ˆ1=1ï¼‰</code>æ”¹ä¸º <code>&lt;where&gt;&lt;/where&gt;</code>åŒ…ä½ifè¯­å¥</p>
<p><strong>2ã€<code>&lt;foreach&gt;</code></strong></p>
<p>æ¥å£æ–¹æ³•ï¼š<br>
<code>List&lt;Student&gt; selectStudentsByForeach(List&lt;Integer&gt; idList);</code></p>
<p>mapper æ–‡ä»¶ï¼š</p>
<pre><code>    &lt;select id=&quot;selectStudentsByForeach2&quot; resultType=&quot;com.csy.entity.Student&quot;&gt;
        select id,name,email,age from student
        &lt;if test=&quot;array.length&gt;0 &quot;&gt;
            /*testä¸­ä½¿ç”¨@Paramå¯ç”¨è‡ªå·±è®¾ç½®çš„åç§°ï¼ˆidListï¼‰,å¦åˆ™åªèƒ½æ˜¯listã€arrayäº¤ç»™mybatisè‡ªå·±å»æ‰¾é›†åˆ*/
            where id in
            &lt;foreach collection=&quot;array&quot; item=&quot;stuId&quot; open=&quot;(&quot; close=&quot;)&quot; separator=&quot;,&quot;&gt;
                  /*æ­¤å¤„collection ä¸å‰é¢çš„testè¦ä¸€è‡´*/
                #{stuId}
            &lt;/foreach&gt;
        &lt;/if&gt;
    &lt;/select&gt;
</code></pre>
<p>æ³¨æ„foreachå„å‚æ•°é—´ç”¨ç©ºæ ¼éš”å¼€ï¼Œitem=&quot;é›†åˆä¸­çš„æˆå‘˜&quot;ï¼Œopenã€closeã€separatoråˆ†åˆ«è¡¨ç¤ºæ‰€æ’å…¥sqlç‰‡æ®µçš„å¼€å§‹ã€ç»“æŸåŠåˆ†å‰²ç¬¦ã€‚</p>
<p><strong>3ã€Sqlä»£ç ç‰‡æ®µ</strong></p>
<p>mapper æ–‡ä»¶ï¼š</p>
<pre><code>&lt;!--åˆ›å»º sql ç‰‡æ®µ id:ç‰‡æ®µçš„è‡ªå®šä¹‰åç§°--&gt;
&lt;sql id=&quot;studentSql&quot;&gt;
 select id,name,email,age from student
&lt;/sql&gt;

&lt;!-- å¼•ç”¨ sql ç‰‡æ®µ --&gt;
 &lt;include refid=&quot;studentSql&quot;/&gt; /*ä»£æ›¿ä¹‹å‰å®šä¹‰çš„ä»£ç ç‰‡æ®µ*/
</code></pre>
<hr>
<h3 id="typealiasesç±»å‹åˆ«å">typeAliasesç±»å‹åˆ«å</h3>
<p>Mybatis æ”¯æŒé»˜è®¤åˆ«åï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é‡‡ç”¨è‡ªå®šä¹‰åˆ«åæ–¹å¼æ¥å¼€å‘ï¼Œä¸»è¦ä½¿ç”¨åœ¨<code>&lt;select resultType=â€åˆ«åâ€&gt;</code><br>
mybatis.xml ä¸»é…ç½®æ–‡ä»¶å®šä¹‰åˆ«åï¼š</p>
<pre><code>&lt;typeAliases&gt;
    &lt;!--å®šä¹‰å•ä¸ªç±»å‹çš„åˆ«å
        type:ç±»å‹çš„å…¨é™å®šåç§°
        alias:è‡ªå®šä¹‰åˆ«å --&gt;
    &lt;typeAlias type=&quot;com.csy.domain.Student&quot; alias=&quot;mystudent&quot;/&gt;
    &lt;!--æ‰¹é‡å®šä¹‰åˆ«åï¼Œæ‰«ææ•´ä¸ªåŒ…ä¸‹çš„ç±»ï¼Œåˆ«åä¸ºç±»åï¼ˆé¦–å­—æ¯å¤§å†™æˆ–å°å†™éƒ½å¯ä»¥ï¼‰
                        name:åŒ…å--&gt;
    &lt;package name=&quot;com.csy.domain&quot;/&gt;
    &lt;package name=&quot;...å…¶ä»–åŒ…&quot;/&gt;
&lt;/typeAliases&gt;
</code></pre>
<p>mapper.xml æ–‡ä»¶ï¼Œä½¿ç”¨åˆ«åè¡¨ç¤ºç±»å‹</p>
<pre><code>&lt;select id=&quot;selectStudents&quot; resultType=&quot;mystudent&quot;&gt;
 select id,name,email,age from student
&lt;/select&gt;
</code></pre>
<h3 id="åŸºäº-pagehelper-åˆ†é¡µ"><em><strong>åŸºäº PageHelper åˆ†é¡µ</strong></em></h3>
<p><strong>1ã€mavenåæ ‡</strong></p>
<pre><code>&lt;dependency&gt;
 &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;
 &lt;artifactId&gt;pagehelper&lt;/artifactId&gt;
 &lt;version&gt;5.1.10&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p><strong>2ã€åŠ å…¥ plugin é…ç½®</strong></p>
<pre><code>åœ¨&lt;environments&gt;ä¹‹å‰åŠ å…¥
&lt;plugins&gt;
 &lt;plugin interceptor=&quot;com.github.pagehelper.PageInterceptor&quot; /&gt;
&lt;/plugins&gt;
</code></pre>
<p><strong>3ã€ç”¨æ³•</strong></p>
<p>æŸ¥è¯¢è¯­å¥ä¹‹å‰è°ƒç”¨ PageHelper.startPage ï¼ˆ,ï¼‰é™æ€æ–¹æ³•ã€‚ï¼Œç´§è·Ÿåœ¨è¿™ä¸ªæ–¹æ³•åçš„ç¬¬ä¸€ä¸ª MyBatis æŸ¥è¯¢æ–¹æ³•ä¼šè¢«è¿›è¡Œåˆ†é¡µã€‚</p>
<p>//è·å–ç¬¬ 1 é¡µï¼Œ3 æ¡å†…å®¹<br>
<code>PageHelper.startPage(1,3);</code></p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li><a href="#idea%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE"><em><strong>ideaå¸¸ç”¨å¿«æ·é”®</strong></em></a></li>
<li><a href="#jdbc%E7%9A%84%E5%86%97%E4%BD%99%E6%80%A7"><em><strong>JDBCçš„å†—ä½™æ€§</strong></em></a></li>
<li><a href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><em><strong>å‡†å¤‡å·¥ä½œ</strong></em></a></li>
<li><a href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6xml"><em><strong>é…ç½®æ–‡ä»¶.xml</strong></em></a></li>
<li><a href="#%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E5%8F%AF%E5%86%99%E4%B8%80%E4%B8%AA%E5%B7%A5%E5%85%B7%E7%B1%BButil"><em><strong>å¸¸ç”¨ä»£ç å¯å†™ä¸€ä¸ªå·¥å…·ç±»util</strong></em></a></li>
<li><a href="#%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><em><strong>åŠ¨æ€ä»£ç†</strong></em></a></li>
<li><a href="#mybatis%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0"><em><strong>mybatisä¼ é€’å‚æ•°</strong></em></a></li>
<li><a href="#mybatis%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><em><strong>mybatisè¾“å‡ºç»“æœ</strong></em></a></li>
<li><a href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2-like"><em><strong>æ¨¡ç³ŠæŸ¥è¯¢ like</strong></em></a></li>
<li><a href="#%E5%8A%A8%E6%80%81sql"><em><strong>åŠ¨æ€Sql</strong></em></a></li>
<li><a href="#typealiases%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D">typeAliasesç±»å‹åˆ«å</a></li>
<li><a href="#%E5%9F%BA%E4%BA%8E-pagehelper-%E5%88%86%E9%A1%B5"><em><strong>åŸºäº PageHelper åˆ†é¡µ</strong></em></a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        

        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="https://caosy-pmt.github.io/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
